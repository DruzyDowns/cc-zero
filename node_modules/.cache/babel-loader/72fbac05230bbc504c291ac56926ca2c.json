{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrewdowns/dev/cc-zero/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/andrewdowns/dev/cc-zero/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/andrewdowns/dev/cc-zero/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/andrewdowns/dev/cc-zero/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrewdowns/dev/cc-zero/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/andrewdowns/dev/cc-zero/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/andrewdowns/dev/cc-zero/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/andrewdowns/dev/cc-zero/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Gif from\"./Gif\";var Header=function Header(_ref){var clearSearch=_ref.clearSearch,hasResults=_ref.hasResults;return React.createElement(\"div\",{className:\"header grid\"},\" \",hasResults?React.createElement(\"button\",null,React.createElement(\"img\",{onClick:clearSearch,src:require(\"./images/close-icon.svg\"),className:\"block mx-auto\"})):React.createElement(\"h1\",{className:\"title\"},\"Cleveland Museum of Art \\u2014 open access API Explorer\"));};var UserHint=function UserHint(_ref2){var loading=_ref2.loading,hintText=_ref2.hintText;return React.createElement(\"div\",{className:\"user-hint\"},loading?React.createElement(\"img\",{src:require(\"./images/loader.svg\"),className:\"block mx-auto\"}):hintText);};var randomChoice=function randomChoice(arr){var randIndex=Math.floor(Math.random()*arr.length);return arr[randIndex];};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.searchGiphy=function _callee(searchTerm){var response,_ref3,data,rando;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:true});_context.prev=1;_context.next=4;return _regeneratorRuntime.awrap(fetch(\"https://openaccess-api.clevelandart.org/api/artworks/?cc0&q=\".concat(searchTerm,\"&limit=50\")));case 4:response=_context.sent;_context.next=7;return _regeneratorRuntime.awrap(response.json());case 7:_ref3=_context.sent;data=_ref3.data;if(data.length){_context.next=11;break;}throw\"Nothing found for \".concat(searchTerm,\", please try another search\");case 11:rando=randomChoice(data);//console.log(data[0].images.original.mp4);\n//const gif = rando.images.original.mp4\n_this.setState(function(prevState,props){return _objectSpread({},prevState,{gifs:[].concat(_toConsumableArray(prevState.gifs),[rando]),hintText:\"Press enter for more \".concat(searchTerm),loading:false});});_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);_this.setState(function(prevState,props){return _objectSpread({},prevState,{loading:false,hintText:_context.t0});});case 18:case\"end\":return _context.stop();}}},null,null,[[1,15]]);};_this.handleChange=function(event){var value=event.target.value;_this.setState(function(prevState,props){return _objectSpread({},prevState,{searchTerm:value,hintText:value.length>2?\"Press enter to search for \".concat(value):\"\"});});};_this.handleKeyPress=function(event){var value=event.target.value;if(value.length>2&&event.key===\"Enter\"){//alert(`Search for ${value}`);\n_this.searchGiphy(value);}};_this.clearSearch=function(){_this.setState(function(prevState,props){return _objectSpread({},prevState,{searchTerm:\"\",hintText:\"\",gifs:[]});});//document.querySelector(\"input\").focus();\n_this.textInput.focus();};_this.state={searchTerm:\"\",hintText:\"\",gifs:[]};return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,searchTerm=_this$state.searchTerm,gifs=_this$state.gifs;var hasResults=gifs.length;return React.createElement(\"div\",{className:\"page\"},React.createElement(Header,{clearSearch:this.clearSearch,hasResults:hasResults}),React.createElement(\"div\",{className:\"search grid\"},this.state.gifs.map(function(gif){return React.createElement(Gif,gif);}),React.createElement(\"input\",{ref:function ref(input){_this2.textInput=input;},className:\"input grid-item\",placeholder:\"Type something!\",onChange:this.handleChange,onKeyPress:this.handleKeyPress,value:searchTerm})),React.createElement(UserHint,this.state));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/andrewdowns/dev/cc-zero/src/App.js"],"names":["React","Component","Gif","Header","clearSearch","hasResults","require","UserHint","loading","hintText","randomChoice","arr","randIndex","Math","floor","random","length","App","props","searchGiphy","searchTerm","setState","fetch","response","json","data","rando","prevState","gifs","handleChange","event","value","target","handleKeyPress","key","textInput","focus","state","map","gif","input"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Gif from \"./Gif\";\n\nconst Header = ({ clearSearch, hasResults }) => (\n  <div className=\"header grid\">\n    {\" \"}\n    {hasResults ? (\n      <button>\n        <img\n          onClick={clearSearch}\n          src={require(\"./images/close-icon.svg\")}\n          className=\"block mx-auto\"\n        />\n      </button>\n    ) : (\n      <h1 className=\"title\">\n        Cleveland Museum of Art â€” open access API Explorer\n      </h1>\n    )}\n  </div>\n);\n\nconst UserHint = ({ loading, hintText }) => (\n  <div className=\"user-hint\">\n    {loading ? (\n      <img src={require(\"./images/loader.svg\")} className=\"block mx-auto\" />\n    ) : (\n      hintText\n    )}\n  </div>\n);\n\nconst randomChoice = (arr) => {\n  const randIndex = Math.floor(Math.random() * arr.length);\n  return arr[randIndex];\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchTerm: \"\",\n      hintText: \"\",\n      gifs: [],\n    };\n  }\n\n  searchGiphy = async (searchTerm) => {\n    this.setState({\n      loading: true,\n    });\n    try {\n      const response = await fetch(\n        `https://openaccess-api.clevelandart.org/api/artworks/?cc0&q=${searchTerm}&limit=50`\n      );\n      const { data } = await response.json();\n\n      if (!data.length) {\n        throw `Nothing found for ${searchTerm}, please try another search`;\n      }\n\n      const rando = randomChoice(data);\n      //console.log(data[0].images.original.mp4);\n\n      //const gif = rando.images.original.mp4\n      this.setState((prevState, props) => ({\n        ...prevState,\n        gifs: [...prevState.gifs, rando],\n        hintText: `Press enter for more ${searchTerm}`,\n        loading: false,\n      }));\n    } catch (error) {\n      this.setState((prevState, props) => ({\n        ...prevState,\n        loading: false,\n        hintText: error,\n      }));\n    }\n  };\n\n  handleChange = (event) => {\n    const { value } = event.target;\n    this.setState((prevState, props) => ({\n      ...prevState,\n      searchTerm: value,\n      hintText: value.length > 2 ? `Press enter to search for ${value}` : \"\",\n    }));\n  };\n\n  handleKeyPress = (event) => {\n    const { value } = event.target;\n    if (value.length > 2 && event.key === \"Enter\") {\n      //alert(`Search for ${value}`);\n      this.searchGiphy(value);\n    }\n  };\n\n  clearSearch = () => {\n    this.setState((prevState, props) => ({\n      ...prevState,\n      searchTerm: \"\",\n      hintText: \"\",\n      gifs: [],\n    }));\n    //document.querySelector(\"input\").focus();\n    this.textInput.focus();\n  };\n\n  render() {\n    const { searchTerm, gifs } = this.state;\n    const hasResults = gifs.length;\n    return (\n      <div className=\"page\">\n        <Header clearSearch={this.clearSearch} hasResults={hasResults} />\n        <div className=\"search grid\">\n          {}\n          {}\n\n          {this.state.gifs.map((gif) => (\n            <Gif {...gif} />\n          ))}\n\n          <input\n            ref={(input) => {\n              this.textInput = input;\n            }}\n            className=\"input grid-item\"\n            placeholder=\"Type something!\"\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n            value={searchTerm}\n          />\n        </div>\n        <UserHint {...this.state} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}